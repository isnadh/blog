<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.1"
   id="mscgenjs__svg"
   class="mscgenjs__svg"
   width="336"
   height="390"
   viewBox="0 0 336 390"
   sodipodi:docname="mscgenjs_chart.svg"
   inkscape:version="0.92.1 r15371"
   inkscape:export-filename="/home/ajarax/local/node.js/blog/source/_drafts/writing-stm8-bootloader/mscgenjs_chart.svg.png"
   inkscape:export-xdpi="96"
   inkscape:export-ydpi="96">
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1920"
     inkscape:window-height="1027"
     id="namedview171"
     showgrid="false"
     inkscape:zoom="1.2102564"
     inkscape:cx="122.59556"
     inkscape:cy="225.96964"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1"
     inkscape:current-layer="g90" />
  <metadata
     id="metadata173">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <desc
     id="desc2">

# Generated by mscgen_js - https://sverweij.github.io/mscgen_js
//width=500;
Bootloader, Host;

Bootloader &lt;= Host : [preamble][len][CRC][CRC];
Bootloader &gt;&gt; Host : ACK;
Bootloader &lt;= Host : block[0];
Bootloader &gt;&gt; Host : ACK;
...;
Bootloader &lt;= Host : block[len-1];
Bootloader rbox Bootloader : verify CRC;
Bootloader &gt;&gt; Host : ACK/NACK;
</desc>
  <defs
     id="defs18">
    <style
       type="text/css"
       id="style4">@import 'https://fonts.googleapis.com/css?family=Gochi+Hand';svg.mscgenjs__svg{font-family:Helvetica,sans-serif;font-size:12px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:2}.mscgenjs__svg path, .mscgenjs__svg rect{fill:none}.mscgenjs__svg .label-text-background{fill:white;stroke:white;stroke-width:0}.mscgenjs__svg .bglayer{fill:white;stroke:white;stroke-width:0}.mscgenjs__svg line{}.mscgenjs__svg .return, .mscgenjs__svg .comment{stroke-dasharray:5,3}.mscgenjs__svg .inline_expression_divider{stroke-dasharray:10,5}.mscgenjs__svg text{color:inherit;stroke:none;text-anchor:middle}.mscgenjs__svg text.anchor-start{text-anchor:start}.mscgenjs__svg .arrow-marker{overflow:visible}.mscgenjs__svg .arrow-style{stroke-width:1}.mscgenjs__svg .arcrow, .mscgenjs__svg .arcrowomit, .mscgenjs__svg .emphasised{stroke-linecap:butt}.mscgenjs__svg .arcrowomit{stroke-dasharray:2,2}.mscgenjs__svg .box, .mscgenjs__svg .entity{fill:white;stroke-linejoin:round}.mscgenjs__svg .inherit{stroke:inherit;color:inherit}.mscgenjs__svg .inherit-fill{fill:inherit}.mscgenjs__svg .watermark{font-size:48pt;font-weight:bold;opacity:0.14}svg.mscgenjs__svg{font-family:'Gochi Hand', cursive;font-size:14px;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.mscgenjs__svg text{fill:rgba(0,0,128,0.7)}.mscgenjs__svg marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.mscgenjs__svg line, .mscgenjs__svg path, .mscgenjs__svg rect, .mscgenjs__svg polygon{stroke:blue !important}.mscgenjs__svg text.entity-text{font-weight:bold;text-decoration:none}.mscgenjs__svg text.return-text{font-style:italic}.mscgenjs__svg path.note{fill:#FFFFCC;}.mscgenjs__svg .label-text-background{opacity:0}</style>
    <marker
       orient="auto"
       id="mscgenjs__svgcallback-black"
       class="arrow-marker"
       viewBox="0 0 10 10"
       refX="9"
       refY="3"
       markerUnits="strokeWidth"
       markerWidth="10"
       markerHeight="10">
      <path
         d="M 1,1 l 8,2 l-8,2"
         class="arrow-style"
         style="stroke-dasharray:100,1;stroke:#000000;opacity:1"
         id="path6" />
    </marker>
    <marker
       orient="auto"
       id="mscgenjs__svgmethod-black"
       class="arrow-marker"
       viewBox="0 0 10 10"
       refX="9"
       refY="3"
       markerUnits="strokeWidth"
       markerWidth="10"
       markerHeight="10">
      <polygon
         points="1,1  9,3  1,5"
         class="arrow-style"
         stroke="#000000"
         fill="#000000"
         id="polygon12" />
    </marker>
    <filter
       id="filter373"
       inkscape:label="Greyscale"
       style="color-interpolation-filters:sRGB;">
      <feColorMatrix
         id="feColorMatrix371"
         values="0.21 0.72 0.072 0 0 0.21 0.72 0.072 0 0 0.21 0.72 0.072 0 0 0 0 0 1 0 " />
    </filter>
    <filter
       id="filter377"
       inkscape:label="Greyscale"
       style="color-interpolation-filters:sRGB;">
      <feColorMatrix
         id="feColorMatrix375"
         values="0.21 0.72 0.072 0 0 0.21 0.72 0.072 0 0 0.21 0.72 0.072 0 0 0 0 0 1 0 " />
    </filter>
    <filter
       id="filter381"
       inkscape:label="Greyscale"
       style="color-interpolation-filters:sRGB;">
      <feColorMatrix
         id="feColorMatrix379"
         values="0.21 0.72 0.072 0 0 0.21 0.72 0.072 0 0 0.21 0.72 0.072 0 0 0 0 0 1 0 " />
    </filter>
  </defs>
  <g
     id="mscgenjs__svg_body"
     transform="translate(38,3) scale(1,1)">
    <g
       id="mscgenjs__svg_arcspans" />
    <g
       style="filter:url(#filter381);opacity:1"
       id="mscgenjs__svg_lifelines">
      <path
         d="M50,38 L50,39 S49,57  50,76 "
         class="arcrow"
         id="path24" />
      <path
         d="M210,38 L210,39 S212,55  210,76 "
         class="arcrow"
         id="path26" />
      <path
         d="M50,76 L50,77 S52,95  50,114 "
         class="arcrow"
         id="path28" />
      <path
         d="M210,76 L210,77 S211,94  210,114 "
         class="arcrow"
         id="path30" />
      <path
         d="M50,114 L50,115 S52,136  50,152 "
         class="arcrow"
         id="path32" />
      <path
         d="M210,114 L210,115 S209,131  210,152 "
         class="arcrow"
         id="path34" />
      <path
         d="M50,152 L50,153 S53,169  50,190 "
         class="arcrow"
         id="path36" />
      <path
         d="M210,152 L210,153 S209,172  210,190 "
         class="arcrow"
         id="path38" />
      <path
         d="M50,190 L50,191 S52,209  50,228 "
         class="arcrow"
         id="path40" />
      <path
         d="M210,190 L210,191 S208,209  210,228 "
         class="arcrow"
         id="path42" />
      <path
         d="M50,228 L50,229 S50,246  50,266 "
         class="arcrowomit"
         id="path44" />
      <path
         d="M210,228 L210,229 S211,247  210,266 "
         class="arcrowomit"
         id="path46" />
      <path
         d="M50,266 L50,267 S51,284  50,304 "
         class="arcrow"
         id="path48" />
      <path
         d="M210,266 L210,267 S211,286  210,304 "
         class="arcrow"
         id="path50" />
      <path
         d="M50,304 L50,305 S49,322  50,346 "
         class="arcrow"
         id="path52" />
      <path
         d="M210,304 L210,305 S213,328  210,346 "
         class="arcrow"
         id="path54" />
      <path
         d="M50,346 L50,347 S53,366  50,384 "
         class="arcrow"
         id="path56" />
      <path
         d="M210,346 L210,347 S210,365  210,384 "
         class="arcrow"
         id="path58" />
    </g>
    <g
       style="filter:url(#filter377)"
       id="mscgenjs__svg_sequence">
      <g
         id="mscgenjs__svgentities">
        <g
           id="g69">
          <path
             d="M0,0 S36,-2  100,0 L100,0 S101,17  100,38 L100,38 S63,39  0,38 L0,38 S-2,21  0,0 z"
             class="entity"
             id="path61" />
          <g
             id="g67">
            <text
               style="-inkscape-font-specification:'sans-serif, Normal';font-family:sans-serif;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:12px;text-anchor:middle;text-align:center;writing-mode:lr;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;;opacity:1"
               x="50"
               y="22.75"
               class="entity-text "
               id="text65">
              <tspan
                 style="-inkscape-font-specification:'sans-serif, Normal';font-family:sans-serif;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:12px;text-anchor:middle;text-align:center;writing-mode:lr;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;;opacity:1"
                 id="tspan63">Bootloader</tspan>
            </text>
          </g>
        </g>
        <g
           id="g79">
          <path
             d="M160,0 S195,-2  260,0 L260,0 S260,21  260,38 L260,38 S225,39  160,38 L160,38 S158,16  160,0 z"
             class="entity"
             id="path71" />
          <g
             id="g77">
            <text
               x="210"
               y="22.75"
               class="entity-text "
               id="text75">
              <tspan
                 style="-inkscape-font-specification:'sans-serif, Normal';font-family:sans-serif;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:12px;text-anchor:middle;text-align:center;writing-mode:lr;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;opacity:1"
                 id="tspan73">Host</tspan>
            </text>
          </g>
        </g>
      </g>
      <g
         id="g92">
        <path
           d="M210,95 L209,95 S177,93  140,95  S106,93  50,95 "
           class="arc directional method"
           style="stroke:#000000;opacity:1"
           marker-end="url(#mscgenjs__svgmethod-black)"
           id="path82" />
        <g
           id="g90">
          <path
             d="M51.5,79.25 S84.5,79.25  121.5,79.25  S159.5,77.25  208.5,79.25 L208.5,79.25 S210.5,86.75  208.5,96.25 L208.5,96.25 S170.5,93.25  138.5,96.25  S105.5,98.25  51.5,96.25 L51.5,96.25 S54.5,87.75  51.5,79.25 z"
             class="label-text-background"
             id="path84" />
          <text
             style="-inkscape-font-specification:'sans-serif, Normal';font-family:sans-serif;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:10.66666667px;text-anchor:middle;text-align:center;writing-mode:lr;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;;opacity:1"
             x="130"
             y="90.25"
             class="directional-text method-text "
             id="text88">
            <tspan
               style="-inkscape-font-specification:'sans-serif, Normal';font-family:sans-serif;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:10.66666667px;text-anchor:middle;text-align:center;writing-mode:lr;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;;opacity:1"
               id="tspan86">[preamble][len][CRC][CRC]</tspan>
          </text>
        </g>
      </g>
      <g
         id="g104">
        <path
           d="M50,133 L51,133 S83,135  120,133  S152,131  210,133 "
           class="arc directional return"
           style="stroke:#000000;opacity:1"
           marker-end="url(#mscgenjs__svgcallback-black)"
           id="path94" />
        <g
           id="g102">
          <path
             d="M117,117.25 S128,115.25  145,117.25 L145,117.25 S148,124.75  145,134.25 L145,134.25 S131,134.25  117,134.25 L117,134.25 S116,125.75  117,117.25 z"
             class="label-text-background"
             id="path96" />
          <text
             x="130"
             y="128.25"
             class="directional-text return-text "
             id="text100">
            <tspan
               id="tspan98">ACK</tspan>
          </text>
        </g>
      </g>
      <g
         id="g116">
        <path
           d="M210,171 L209,171 S176,169  140,171  S106,169  50,171 "
           class="arc directional method"
           style="stroke:#000000;opacity:1"
           marker-end="url(#mscgenjs__svgmethod-black)"
           id="path106" />
        <g
           id="g114">
          <path
             d="M106,155.25 S132.5,158.25  153,155.25 L153,155.25 S156,160.75  153,172.25 L153,172.25 S129.5,173.25  106,172.25 L106,172.25 S107,163.75  106,155.25 z"
             class="label-text-background"
             id="path108" />
          <text
             x="130"
             y="166.25"
             class="directional-text method-text "
             id="text112">
            <tspan
               id="tspan110">block[0]</tspan>
          </text>
        </g>
      </g>
      <g
         id="g128">
        <path
           d="M50,209 L51,209 S84,207  120,209  S155,212  210,209 "
           class="arc directional return"
           style="stroke:#000000;opacity:1"
           marker-end="url(#mscgenjs__svgcallback-black)"
           id="path118" />
        <g
           id="g126">
          <path
             d="M117,193.25 S130,195.25  145,193.25 L145,193.25 S146,200.75  145,210.25 L145,210.25 S134,211.25  117,210.25 L117,210.25 S118,200.75  117,193.25 z"
             class="label-text-background"
             id="path120" />
          <text
             x="130"
             y="204.25"
             class="directional-text return-text "
             id="text124">
            <tspan
               id="tspan122">ACK</tspan>
          </text>
        </g>
      </g>
      <g
         id="g130" />
      <g
         id="g142">
        <path
           d="M210,285 L209,285 S177,287  140,285  S104,286  50,285 "
           class="arc directional method"
           style="stroke:#000000;opacity:1"
           marker-end="url(#mscgenjs__svgmethod-black)"
           id="path132" />
        <g
           id="g140">
          <path
             d="M96.5,269.25 S131.5,267.25  162.5,269.25 L162.5,269.25 S160.5,279.75  162.5,286.25 L162.5,286.25 S128.5,287.25  96.5,286.25 L96.5,286.25 S93.5,274.75  96.5,269.25 z"
             class="label-text-background"
             id="path134" />
          <text
             x="130"
             y="280.25"
             class="directional-text method-text "
             id="text138">
            <tspan
               id="tspan136">block[len-1]</tspan>
          </text>
        </g>
      </g>
      <g
         id="g154">
        <path
           d="M50,365 L51,365 S87,368  120,365  S158,364  210,365 "
           class="arc directional return"
           style="stroke:#000000;opacity:1"
           marker-end="url(#mscgenjs__svgcallback-black)"
           id="path144" />
        <g
           id="g152">
          <path
             d="M99,349.25 S133,347.25  163,349.25 L163,349.25 S165,358.75  163,366.25 L163,366.25 S130,363.25  99,366.25 L99,366.25 S100,358.75  99,349.25 z"
             class="label-text-background"
             id="path146" />
          <text
             x="130"
             y="360.25"
             class="directional-text return-text "
             id="text150">
            <tspan
               id="tspan148">ACK/NACK</tspan>
          </text>
        </g>
      </g>
    </g>
    <g
       style="filter:url(#filter373);opacity:1"
       id="mscgenjs__svg_notes">
      <g
         id="g165">
        <path
           d="M-26,314 S-26,308  -20,308 S12,311  50,308  S82,306  120,308 L120,308 S126,308  126,314 S128,326  126,336 L126,336 S126,342  120,342 S84,341  50,342  S13,344  -20,342 L-20,342 S-26,342  -26,336 S-27,324  -26,314 z"
           class="box rbox"
           id="path157" />
        <g
           id="g163">
          <text
             x="50"
             y="328.75"
             class="box-text rbox-text "
             id="text161">
            <tspan
               id="tspan159">verify CRC</tspan>
          </text>
        </g>
      </g>
    </g>
    <g
       id="mscgenjs__svg_watermark" />
  </g>
</svg>
